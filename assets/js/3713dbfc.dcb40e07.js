(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[59],{3793:function(t,n,e){"use strict";e.r(n),e.d(n,{contentTitle:function(){return j},default:function(){return z},frontMatter:function(){return X},metadata:function(){return F},toc:function(){return G}});var o=e(2122),r=e(9756),s=(e(7294),e(3905)),c=e(3680),i=e(7625),u=e(8644);function a(t){"undefined"!=typeof process?process.exit(t):console.log("# Exit code: "+t.toString())}function l(t){return"undefined"!=typeof process?"\x1b[31m"+t+"\x1b[0m":t}function d(t){return"undefined"!=typeof process?"\x1b[34m"+t+"\x1b[0m":t}function f(t){return"undefined"!=typeof process?"\x1b[2m"+t+"\x1b[0m":t}var v,p=(v="PASS","undefined"!=typeof process?"\x1b[32m"+v+"\x1b[0m":v),m=l("FAIL"),g=(function(t){}("TODO"),{contents:!1}),h={contents:0},w={contents:0},y={contents:0},_={contents:0};function b(t,n){var e=n.toString(),o=h.contents.toString();console.log(e+"/"+o+": "+t)}var S={contents:0},T={contents:0};var k={contents:0};function C(t){k.contents={hd:t,tl:k.contents}}function A(t){return void 0!==t?" - "+t:f(" - No message")}function I(t,n,e,o,r){c._2(e,o,r)?(S.contents=S.contents+1|0,console.log("  "+p+A(t))):(T.contents=T.contents+1|0,console.log("  "+m+A(t)),console.log("    ---"),void 0!==n&&console.log("    "+d("operator")+": "+n),console.log("    "+d("left")+": ",o),console.log("    "+d("right")+":",r),console.log("    ..."))}function M(t,n,e){var o=void 0!==n?n:5e3;if(!g.contents){h.contents=h.contents+1|0;var r=h.contents;return C((function(n){var s=T.contents,i=S.contents;b(t,r);try{var l=setTimeout((function(t){var e="Timed out after "+o.toString()+"ms";return _.contents=_.contents+1|0,console.log("  "+m+A(e)),c._1(n,void 0)}),o);return c._1(e,(function(t,e){return void 0!==t&&I("Correct assertion count","planned",(function(t,n){return t===n}),t,(S.contents+T.contents|0)-(i+s|0)|0),clearTimeout(l),T.contents>s?y.contents=y.contents+1|0:w.contents=w.contents+1|0,c._1(n,void 0)}))}catch(f){var d=u.UW(f);return console.error(d),a(1)}}))}console.error(l('# Cannot add testAsync("'+t+'", ...), tests must be defined at the top level'))}function q(t,n){if(!g.contents){h.contents=h.contents+1|0;var e=h.contents;return C((function(o){var r=T.contents;b(t,e);try{c._1(n,void 0)}catch(i){var s=u.UW(i);console.error(s),a(1)}return T.contents>r?y.contents=y.contents+1|0:w.contents=w.contents+1|0,c._1(o,void 0)}))}console.error(l('# Cannot add test("'+t+'", ...), tests must be defined at the top level'))}function B(t,n,e,o){return q(e,(function(e){var r=c._1(t,void 0);if(c._1(o,r),void 0!==n)return c._1(n,r)}))}var E=!0;function D(t){g.contents=!0;var n=function(t){return console.log(""),console.log(f("# Ran "+String(h.contents)+" tests ("+(S.contents+T.contents|0).toString()+" assertions)")),console.log(f("# "+String(w.contents)+" passed")),console.log(f("# "+String(y.contents+_.contents|0)+" failed"+(_.contents>0?" ("+String(_.contents)+" timed out)":""))),(y.contents+_.contents|0)>0?a(1):a(0)},e=i.GY(k.contents),o=function(t){if(t){var e=t.tl;return c._1(t.hd,(function(t){return o(e)}))}c._1(n,void 0)};return o(e)}setTimeout((function(t){if(E)return D()}),0);var P=e(2755),x=e(6764);function N(t,n,e){return I(t,"equal",(function(t,n){return t===n}),n,e)}function U(t,n){return t.charCodeAt(0)===n}function L(t,n,e){return B((function(t){return{contents:0}}),t,n,e)}M("Async",void 0,(function(t){setTimeout((function(n){var e;return e=void 0,S.contents=S.contents+1|0,console.log("  "+p+A(e)),c._2(t,void 0,void 0)}),100)})),q("Equals",(function(t){return N(void 0,1,1)})),q("Custom comparator",(function(t){return I("Char code should match","isCharCode",U,"a",97)})),q("DeepEquals",(function(t){return N(void 0,"user","user"),n={username:"user",id:"a"},e={username:"user",id:"a"},I(void 0,"deepEqual",P.hZ,n,e);var n,e})),L(void 0,"Setup",(function(t){return t.contents=t.contents+1|0,N(void 0,t.contents,1)})),L(void 0,"Setup",(function(t){return N(void 0,t.contents,0),t.contents=t.contents+1|0,t.contents=t.contents+1|0,N(void 0,t.contents,2)}));var O=function(t){t.contents=0};function R(t,n){return B((function(t){return{contents:0}}),O,t,n)}R("Setup & teardown",(function(t){return t.contents=t.contents+1|0,N(void 0,t.contents,1)})),R("Setup & teardown 2",(function(t){return N(void 0,t.contents,0),t.contents=t.contents+1|0,t.contents=t.contents+1|0,N(void 0,t.contents,2)}));var W=function(t){t.contents=0};function Z(t,n,e){return o=function(t){return{contents:0}},r=W,s=e,M(t,n,(function(t){var n=c._1(o,void 0);return c._2(s,n,(function(e,o){try{void 0!==r&&c._1(r,n)}catch(i){var s=u.UW(i);console.error(s),a(1)}return c._2(t,e,void 0)}))}));var o,r,s}Z("Async setup & teardown",void 0,(function(t,n){return t.contents=t.contents+1|0,N(void 0,t.contents,1),c._2(n,void 0,void 0)})),Z("Async setup & teardown 2",void 0,(function(t,n){return N(void 0,t.contents,0),t.contents=t.contents+1|0,t.contents=t.contents+1|0,N(void 0,t.contents,2),c._2(n,void 0,void 0)})),q("Cutom operator Equals",(function(t){return n=void 0,e=x.nI([["a",1]]),o=x.nI([["a",1]]),I(n,"stringMapEqual",(function(t,n){return x.eq(t,n,(function(t,n){return t===n}))}),e,o);var n,e,o}));var H=["components"],X={title:"Browser testing",sidebar_label:"Browser testing"},j="Testing in a real browser",F={unversionedId:"browser-testing",id:"browser-testing",isDocsHomePage:!1,title:"Browser testing",description:"ReScript Test has a very simple API that can easily run in a real browser.",source:"@site/docs/browser-testing.md",sourceDirName:".",slug:"/browser-testing",permalink:"/rescript-test/browser-testing",editUrl:"https://github.com/bloodyowl/rescript-test/edit/master/website/docs/browser-testing.md",version:"current",frontMatter:{title:"Browser testing",sidebar_label:"Browser testing"},sidebar:"docs",previous:{title:"Environment file",permalink:"/rescript-test/environment-file"},next:{title:"API",permalink:"/rescript-test/api"}},G=[],Y={toc:G};function z(t){var n=t.components,e=(0,r.Z)(t,H);return(0,s.kt)("wrapper",(0,o.Z)({},Y,e,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"testing-in-a-real-browser"},"Testing in a real browser"),(0,s.kt)("p",null,"ReScript Test has a very simple API that can easily run in a real browser."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="BrowserTests.res"',title:'"BrowserTests.res"'},"include MyComponent__Test\ninclude MyOtherComponent__Test\n")),(0,s.kt)("p",null,"Import the compiled file in an HTML page and you'll see your test output in the console!"),(0,s.kt)("p",null,"If you want to see for yourself, check out your console! \ud83d\ude00"))}z.isMDXComponent=!0}}]);