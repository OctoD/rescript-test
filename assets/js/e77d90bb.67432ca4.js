(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[576],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=c(n),f=o,d=m["".concat(s,".").concat(f)]||m[f]||p[f]||a;return n?r.createElement(d,i(i({ref:t},u),{},{components:n})):r.createElement(d,i({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7601:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return m}});var r=n(2122),o=n(9756),a=(n(7294),n(3905)),i=["components"],l={title:"Environment file",sidebar_label:"Environment file"},s="Environment file",c={unversionedId:"environment-file",id:"environment-file",isDocsHomePage:!1,title:"Environment file",description:"Sometimes you'll need to make some values available in the global scope for your tests (e.g. some DOM functionality that JSDOM doesn't handle, some stuff you add using webpack\u2026).",source:"@site/docs/environment-file.md",sourceDirName:".",slug:"/environment-file",permalink:"/rescript-test/environment-file",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/environment-file.md",version:"current",frontMatter:{title:"Environment file",sidebar_label:"Environment file"},sidebar:"docs",previous:{title:"CLI",permalink:"/rescript-test/cli"},next:{title:"Browser testing",permalink:"/rescript-test/browser-testing"}},u=[],p={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"environment-file"},"Environment file"),(0,a.kt)("p",null,"Sometimes you'll need to make some values available in the global scope for your tests (e.g. some DOM functionality that JSDOM doesn't handle, some stuff you add using webpack\u2026)."),(0,a.kt)("p",null,"For those needs, you can add ",(0,a.kt)("inlineCode",{parentName:"p"},"retest.env.js")," in your project root directory:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="retest.env.js"',title:'"retest.env.js"'},'// Translation function\nglobal.__ = (string) => string;\n\n// localStorage\nlet storage = {};\nlet localStorage = {\n  setItem: (key, value) => (storage[key] = value),\n  getItem: (key) => (storage.hasOwnProperty(key) ? storage[key] : null),\n  removeItem: (key) => delete storage[key],\n  clear: () => (storage = {}),\n};\n\nObject.defineProperty(global, "localStorage", { value: localStorage });\nObject.defineProperty(window, "localStorage", { value: localStorage });\n')),(0,a.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"When testing with DOM, be careful to set your properies on ",(0,a.kt)("strong",{parentName:"p"},"both")," ",(0,a.kt)("inlineCode",{parentName:"p"},"window")," & ",(0,a.kt)("inlineCode",{parentName:"p"},"global"),", as sometimes they're accessed as properties instead of variables."))))}m.isMDXComponent=!0}}]);